# Home Dashboard

A modern, glassmorphism-style dashboard for Raspberry Pi, featuring a clock, weather, and news feed with dynamic backgrounds.

## Local Development

### Setup

```bash
npm install
```

### Development Server

```bash
npm run dev
```

---

## Deployment to Raspberry Pi

The recommended way to deploy is using **Docker Compose**.

### Method 1: Source-based Deployment (Git)

Use this if you want to clone the repository directly on your Pi.

1. **Clone and Build**:
   ```bash
   git clone <your-repo-url>
   cd HomeDashboard
   docker-compose up -d --build
   ```

### Method 2: Image-only Deployment (Registry)

Use this if you want to keep your Pi clean and only use the `docker-compose.yml` file.

1. **Build and Push (Local Machine)**:
   ```bash
   docker buildx build --platform linux/arm64 -t <your-username>/home-dashboard:latest --push .
   ```
2. **Deploy (Raspberry Pi)**:
   Copy `docker-compose.yml` to your Pi and run:
   ```bash
   docker-compose up -d
   ```

---

## Displaying on a Monitor (Kiosk Mode)

To show the dashboard in fullscreen without browser borders on a monitor attached to your Pi.

> [!IMPORTANT]
> Use the IP address instead of `localhost` so that the **QR Code** generated by the dashboard correctly points to your network address instead of `localhost`.

1. **Run Chromium in Kiosk Mode**:

   ```bash
   chromium-browser --kiosk --incognito --noerrdialogs --disable-infobars http://$(hostname -I | awk '{print $1}'):3000
   ```

2. **Auto-start on Boot (PM2)**:

   ```bash
   sudo npm install -g pm2
   pm2 start "chromium-browser --kiosk --incognito --noerrdialogs --disable-infobars http://$(hostname -I | awk '{print $1}'):3000" --name "kiosk"
   pm2 save
   pm2 startup
   ```

   _Follow the instructions printed by `pm2 startup` to enable it on boot._

---

## Updating the Application

### Method 1 (Source-based)

```bash
git pull
docker-compose up -d --build
```

### Method 2 (Image-only)

1. **Local**: Build and push new image.
2. **Pi**: `docker-compose pull && docker-compose up -d`

---

## Modules & Architecture

The Home Dashboard uses a modular, self-contained architecture. Each module is located in its own directory under `app/components/modules/`.

### Dynamic Module Discovery

Modules are **automatically discovered** and registered. You don't need to manually import new modules into the main application. The system scans the `modules` directory for any folder containing an `index.ts` that exports a `*ModuleDefinition`.

### Module Structure

A typical module folder (e.g., `MyModule`) looks like this:

- `index.ts`: The module definition, configuration interface, and translations.
- `MyModule.vue`: The main display component.
- `MyModuleSettings.vue`: The configuration UI for the Control Center.

### Creating a New Module

1. **Create a folder** in `app/components/modules/`.
2. **Define the Module**: In `index.ts`, export a `ModuleDefinition` object.
   ```typescript
   export const MyModuleDefinition: ModuleDefinition = {
     id: "my-module",
     name: "My Module",
     icon: "i-heroicons-star",
     component: MyModule,
     settingsComponent: MyModuleSettings,
     defaultConfig: { ... },
     translations: { ... }
   };
   ```
3. **Implement the UI**: Create your `.vue` components. Use the `BaseModule` component as a wrapper for consistent styling.
4. **(Optional) Add an API**: If your module needs server-side data, add a handler in `server/api/my-module-info.get.ts`.

---

## Persistent Data

Configuration and backgrounds are stored in the `dashboard-data` volume, mapped to `/app/data` in the container.
